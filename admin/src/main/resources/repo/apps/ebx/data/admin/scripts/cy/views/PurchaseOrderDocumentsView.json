{"type":"cy:bean","properties":{"beanType@STRING":"cy:requiremodule","name@STRING":"PurchaseOrderDocumentsView","dependencies@STRING":["/libs/bndly/data/scripts/cy/ui/IFrame","/libs/bndly/data/scripts/cy/ui/input/Button","/libs/bndly/data/scripts/cy/ui/container/ViewContainer"],"script@STRING":"var PurchaseOrderDocumentsView = ViewContainer.extend({\r\n\tconstruct: function(config) {\r\n\t\tif (!config) {\r\n\t\t\tconfig = {};\r\n\t\t}\r\n\t\tvar buttonsDisabled = true;\r\n\t\tif (config.parent.hasLink(\"self\")) {\r\n\t\t\tbuttonsDisabled = false;\r\n\t\t}\r\n\t\tconfig.donwloadInvoiceButton = new Button({\r\n\t\t\tlabel: \"download invoice\",\r\n\t\t\tdisabled: buttonsDisabled,\r\n\t\t\tlisteners: {\r\n\t\t\t\tclicked: {\r\n\t\t\t\t\tfn: this.downloadInvoice,\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tconfig.downloadShipmentButton = new Button({\r\n\t\t\tlabel: \"download shipment\",\r\n\t\t\tdisabled: buttonsDisabled,\r\n\t\t\tlisteners: {\r\n\t\t\t\tclicked: {\r\n\t\t\t\t\tfn: this.downloadShipment,\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tconfig.items = [\r\n\t\t\tconfig.donwloadInvoiceButton,\r\n\t\t\tconfig.downloadShipmentButton\r\n\t\t];\r\n\t\tthis.callSuper(arguments, config);\r\n\t\tthis.listen(config.parent, \"persisted\", this.orderPersisted, this);\r\n\t},\r\n\tdestroy: function() {\r\n\t\tthis.invokeSuper(arguments);\r\n\t},\r\n\torderPersisted: function(order) {\r\n\t\tthis.donwloadInvoiceButton.enable();\r\n\t\tthis.downloadShipmentButton.enable();\r\n\t},\r\n\trenderTo: function(renderTarget) {\r\n\t\tthis.invokeSuper(arguments);\r\n\t},\r\n\tdownloadShipment: function(button) {\r\n\t\tthis.parent.follow({\r\n\t\t\trel: \"shipment\",\r\n\t\t\tcb: function(shipment) {\r\n\t\t\t\tthis.openPDF(shipment);\r\n\t\t\t},\r\n\t\t\tscope: this\r\n\t\t});\r\n\t},\r\n\tdownloadInvoice: function(button) {\r\n\t\tthis.parent.follow({\r\n\t\t\trel: \"invoice\",\r\n\t\t\tcb: function(invoice) {\r\n\t\t\t\tthis.openPDF(invoice);\r\n\t\t\t},\r\n\t\t\tscope: this\r\n\t\t});\r\n\t},\r\n\topenPDF: function(entity) {\r\n\t\tif (entity) {\r\n\t\t\tvar link = entity.hasLink(\"print\");\r\n\t\t\tif (link) {\r\n\t\t\t\tthis.items.add(new IFrame({\r\n\t\t\t\t\turl: link.getHref(),\r\n\t\t\t\t\thidden: true\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.warn(\"no entity for printing was provided\");\r\n\t\t}\r\n\t}\r\n});\r\nreturn PurchaseOrderDocumentsView;","initMethod@STRING":"","proxy@STRING":"","moduleId@STRING":""}}