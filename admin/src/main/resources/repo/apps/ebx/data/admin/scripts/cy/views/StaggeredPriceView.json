{"type":"cy:bean","properties":{"beanType@STRING":"cy:requiremodule","name@STRING":"StaggeredPriceView","dependencies@STRING":["/libs/bndly/data/scripts/cy/ui/container/InputViewContainer","/libs/bndly/data/scripts/cy/FieldSet","/libs/bndly/data/scripts/cy/Collection","/libs/bndly/data/scripts/cy/ui/input/TextInput","/libs/bndly/data/scripts/cy/ui/input/Button","/libs/bndly/data/scripts/cy/RestBeans","/apps/ebx/data/admin/scripts/cy/views/PriceView"],"script@STRING":"var StaggeredPriceView = PriceView.extend({\r\n\tconstruct: function (config) {\r\n\t\tif (!config) {\r\n\t\t\tconfig = {};\r\n\t\t}\r\n\r\n\t\tif (!config.legend) {\r\n\t\t\tconfig.legend = \"Staggered Price\";\r\n\t\t}\r\n\t\tif (!config.price) {\r\n\t\t\tconfig.price = new RestBeans[\"StaggeredPriceRestBean\"]();\r\n\t\t}\r\n\t\tvar items = config.price.getItems();\r\n\t\tif (!items) {\r\n\t\t\titems = new RestBeans[\"StaggeredPriceItemListRestBean\"]();\r\n\t\t\tconfig.price.setItems(items);\r\n\t\t}\r\n\t\tthis.rangeItems = items.getItems();\r\n\t\tif (!this.rangeItems) {\r\n\t\t\tthis.rangeItems = new Collection();\r\n\t\t\titems.setItems(this.rangeItems);\r\n\t\t}\r\n\t\tconfig.addRangeButton = new Button({\r\n\t\t\tlabel: \"add range\",\r\n\t\t\tlisteners: {\r\n\t\t\t\tclicked: {\r\n\t\t\t\t\tfn: this.addRange,\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tconfig.rangesContainer = new FieldSet({\r\n\t\t\tlegend: \"Ranges\"\r\n\t\t});\r\n\t\tconfig.items = [\r\n\t\t\tconfig.addRangeButton,\r\n\t\t\tconfig.rangesContainer\r\n\t\t];\r\n\t\tthis.callSuper(arguments, config);\r\n\t},\r\n\tdestroy: function () {\r\n\t\tthis.invokeSuper(arguments);\r\n\t},\r\n\trenderTo: function (renderTarget) {\r\n\t\tthis.invokeSuper(arguments);\r\n\t\tthis.rangeItems.each(function (range) {\r\n\t\t\tthis.renderRange(range);\r\n\t\t}, this);\r\n\t},\r\n\taddRange: function () {\r\n\t\tvar range = new RestBeans[\"StaggeredPriceItemRestBean\"]();\r\n\t\tthis.rangeItems.add(range);\r\n\t\tthis.renderRange(range);\r\n\t},\r\n\trenderRange: function (range) {\r\n\t\tvar ivc = new InputViewContainer({\r\n\t\t\trange: range,\r\n\t\t\titems: [\r\n\t\t\t\tnew TextInput({\r\n\t\t\t\t\tname: \"netValue\",\r\n\t\t\t\t\tlabel: \"Net Value\",\r\n\t\t\t\t\tentity: range,\r\n\t\t\t\t\ttype: \"number\",\r\n\t\t\t\t\tmember: \"netValue\"\r\n\t\t\t\t}),\r\n\t\t\t\tnew TextInput({\r\n\t\t\t\t\tname: \"minQuantity\",\r\n\t\t\t\t\tlabel: \"Min\",\r\n\t\t\t\t\tentity: range,\r\n\t\t\t\t\tstep: 1,\r\n\t\t\t\t\ttype: \"number\",\r\n\t\t\t\t\tmember: \"minQuantity\"\r\n\t\t\t\t}),\r\n\t\t\t\tnew TextInput({\r\n\t\t\t\t\tname: \"maxQuantity\",\r\n\t\t\t\t\tlabel: \"Max\",\r\n\t\t\t\t\tentity: range,\r\n\t\t\t\t\tstep: 1,\r\n\t\t\t\t\ttype: \"number\",\r\n\t\t\t\t\tmember: \"maxQuantity\"\r\n\t\t\t\t})\r\n\t\t\t]\r\n\t\t});\r\n\t\tthis.rangesContainer.items.add(ivc);\r\n\t}\r\n});\r\nreturn StaggeredPriceView;","initMethod@STRING":"","proxy@STRING":"","moduleId@STRING":""}}